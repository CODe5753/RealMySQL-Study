# 8.3 B-Tree 인덱스

B-Tree 인덱스는 가장 일반적으로 사용되고 가장 먼저 도입된 알고리즘이다.

DBMS에서는 주로 B+-Tree 또는 B\*-Tree가 사용된다.

> 여기서 B는 Balance를 의미한다.

## 8.3.1 구조 및 특성

최상위에 하나의 루트 노드가 존재하고 하위에 자식 노드가 붙어 있는 형태다.
트리 구조의 가장 하위에 있는 노드를 리프 노드라 하고, 루트도 리프도 아닌 노드를 브랜치 노드라 한다.

DB에서 인덱스와 실제 데이터가 저장된 데이터는 따로 관리되는데, 인덱스의 리프 노드는 항상 실제 데이터 레코드를 찾아가기 위한 주솟값을 가지고 있다.

![8.4 B-Tree 인덱스 구조](../resources/8.4%20B-Tree%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%A1%B0.png)

인덱스 키 값은 모두 정렬돼 있지만, 데이터 파일의 레코드는 정렬돼 있지 않고 임의의 순서로 저장돼 있다.

만약, 레코드가 삭제되어 빈 공간이 생기면 그 다음의 INSERT는 가능한 한 삭제된 공간을 재활용하도록 DBMS가 설계해놨다.
따라서, 항상 INSERT 된 순서로 저장되는 것은 아니다.

> InnoDB 테이블에서 레코드는 클러스터되어 디스크에 저장되므로 기본적으로 PK 순서로 정렬되어 저장된다.
